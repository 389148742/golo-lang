#!/bin/bash

if [ -z "$1" ] 
then
  echo ""
  echo "Usage: gologolo <.golo files> [--args arg1 arg2 ...]"
  echo "(the last .golo file has a main function)"
  echo ""
  echo "Examples:"
  echo "  golo foo.golo bar.golo"
  echo "  golo foo.golo bar.golo --args hello world"
  echo ""
  exit 1
fi

BIN_DIR=`dirname $0`
GOLO_DIR=`cd ${BIN_DIR}/..; pwd`

if [ -z ${GOLO_CLASSPATH} ]
then
  GOLO_CLASSPATH='.'
else
  GOLO_CLASSPATH='.':${GOLO_CLASSPATH}
fi

for jar in ${GOLO_DIR}/lib/*.jar
do
  GOLO_CLASSPATH=${GOLO_CLASSPATH}:${jar}
done

java ${JVM_FLAGS} -server -XX:-TieredCompilation -classpath ${GOLO_CLASSPATH} fr.insalyon.citi.golo.cli.MainGoloGolo $@

