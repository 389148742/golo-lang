<!DOCTYPE html>
<%@params doc %>
<%@import com.github.rjeschke.txtmark.Processor %>
<html>
<head>
  <title>Documentation for <%= doc: moduleName() %></title>
</head>
<body>

<h1>Documentation for <%= doc: moduleName() %></h1>
<div>
  <%= process(doc: moduleDocumentation()) %>
</div>

<% if not doc: functions(): isEmpty() { %>
<h2>Functions</h2>
<% foreach funcDoc in doc: functions() { %>
  <h3><%= funcDoc: name() %>(<%= funcDoc: arguments(): join(", ") %>)</h3>
  <div>
    <%= process(funcDoc: documentation()) %>
  </div>
<% } %>
<% } %>

<% if not doc: augmentations(): isEmpty() { %>
<h2>Augmentations</h2>
<% foreach augmentation in doc: augmentations(): keySet() { %>
  <h3><%= augmentation %></h3>
  <div>
    <%= process(doc: augmentations(): get(augmentation)) %>
  </div>
  <% foreach funcDoc in doc: augmentationFunctions(): get(augmentation) { %>
    <h4><%= funcDoc: name() %>(<%= funcDoc: arguments(): join(", ") %>)</h4>
    <div>
      <%= process(funcDoc: documentation()) %>
    </div>
  <% } %>
<% } %>
<% } %>

<% if not doc: structs(): isEmpty() { %>
<h2>Structs</h2>
<% foreach structName in doc: structs(): keySet() { %>
  <h3><%= structName %></h3>
  <p>Members:</p>
  <ul>
  <% foreach member in doc: structMembers(): get(structName) { %>
    <li><code><%= member %></code></li>
  <% } %>
  </ul>
  <div>
    <%= process(doc: structs(): get(structName)) %>
  </div>
<% } %>
<% } %>

</body>
</html>
